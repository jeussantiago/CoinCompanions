{"ast":null,"code":"import _slicedToArray from\"/Users/jeussantiago/Documents/coding/django/CoinCompanions/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Accordion,ListGroup,Button,Row}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Message from\"../Message\";import{getGroupCredits,getGroupDebts}from\"../../actions/groupActions\";import SettlePopup from\"./SettlePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GroupCreditDebt(_ref){var groupDetails=_ref.groupDetails;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showSettlePopup=_useState2[0],setShowSettlePopup=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedUser=_useState4[0],setSelectedUser=_useState4[1];var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;// settle expenses\nvar groupSettleCreate=useSelector(function(state){return state.groupSettleCreate;});var groupSettleCreateSuccess=groupSettleCreate.success;// expense update\nvar groupExpenseDetailUpdate=useSelector(function(state){return state.groupExpenseDetailUpdate;});var groupExpenseDetailUpdateSuccess=groupExpenseDetailUpdate.success;// expense delete\nvar groupExpenseDelete=useSelector(function(state){return state.groupExpenseDelete;});var groupExpenseDeleteSuccess=groupExpenseDelete.success;// group expense created\nvar groupExpenseCreate=useSelector(function(state){return state.groupExpenseCreate;});var groupExpenseCreateSuccess=groupExpenseCreate.success;// group User Credits (owed money)\nvar groupCredits=useSelector(function(state){return state.groupCredits;});var groupCreditError=groupCredits.error,groupCreditLoading=groupCredits.loading,groupCredit=groupCredits.groupCredit;// group User Debts (owe money)\nvar groupDebts=useSelector(function(state){return state.groupDebts;});var groupDebtError=groupDebts.error,groupDebtLoading=groupDebts.loading,groupDebt=groupDebts.groupDebt;var handleCloseSettlePopup=function handleCloseSettlePopup(){setShowSettlePopup(false);setSelectedUser(null);};var handleOpenSettlePopup=function handleOpenSettlePopup(receivingUser){setSelectedUser(receivingUser);setShowSettlePopup(true);};useEffect(function(){dispatch(getGroupCredits(groupDetails.id));dispatch(getGroupDebts(groupDetails.id));},[dispatch,groupDetails,groupSettleCreateSuccess,groupExpenseDetailUpdateSuccess,groupExpenseDeleteSuccess,groupExpenseCreateSuccess]);return/*#__PURE__*/_jsxs(\"div\",{children:[groupCreditLoading||groupDebtLoading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):groupCreditError||groupDebtError?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:groupCreditError||groupDebtError}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Members\"}),/*#__PURE__*/_jsx(Accordion,{defaultActiveKey:null,children:groupDetails.members.map(function(member){var _groupCredit$credits_,_groupDebt$debts_per_;return/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:member.id,children:[/*#__PURE__*/_jsx(Accordion.Header,{children:member.name}),/*#__PURE__*/_jsxs(Accordion.Body,{children:[(groupCredit===null||groupCredit===void 0?void 0:(_groupCredit$credits_=groupCredit.credits_per_user)===null||_groupCredit$credits_===void 0?void 0:_groupCredit$credits_[member.id])&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ListGroup,{children:groupCredit.credits_per_user[member.id].map(function(user,index){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary\",children:[\"$\",user.amount,\" \"]}),\"from \",user.debtor.name]},index);})})}),(groupDebt===null||groupDebt===void 0?void 0:(_groupDebt$debts_per_=groupDebt.debts_per_user)===null||_groupDebt$debts_per_===void 0?void 0:_groupDebt$debts_per_[member.id])&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ListGroup,{children:groupDebt.debts_per_user[member.id].map(function(user,index){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-secondary\",children:[\"$\",user.amount,\" \"]}),\"to \",user.creditor.name,userInfo&&member.id===userInfo.id&&/*#__PURE__*/_jsx(Row,{className:\"mt-3\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:function onClick(){return handleOpenSettlePopup(user.creditor);},children:\"Settle\"})})]},index);})})})]})]},member.id);})})]}),selectedUser&&/*#__PURE__*/_jsx(SettlePopup,{groupId:groupDetails.id,receivingUser:selectedUser,show:showSettlePopup,handleClose:handleCloseSettlePopup})]});}export default GroupCreditDebt;","map":{"version":3,"names":["React","useState","useEffect","Accordion","ListGroup","Button","Row","useDispatch","useSelector","Message","getGroupCredits","getGroupDebts","SettlePopup","jsx","_jsx","jsxs","_jsxs","GroupCreditDebt","_ref","groupDetails","dispatch","_useState","_useState2","_slicedToArray","showSettlePopup","setShowSettlePopup","_useState3","_useState4","selectedUser","setSelectedUser","userLogin","state","userInfo","groupSettleCreate","groupSettleCreateSuccess","success","groupExpenseDetailUpdate","groupExpenseDetailUpdateSuccess","groupExpenseDelete","groupExpenseDeleteSuccess","groupExpenseCreate","groupExpenseCreateSuccess","groupCredits","groupCreditError","error","groupCreditLoading","loading","groupCredit","groupDebts","groupDebtError","groupDebtLoading","groupDebt","handleCloseSettlePopup","handleOpenSettlePopup","receivingUser","id","children","variant","defaultActiveKey","members","map","member","_groupCredit$credits_","_groupDebt$debts_per_","Item","eventKey","Header","name","Body","credits_per_user","user","index","className","amount","debtor","debts_per_user","creditor","onClick","groupId","show","handleClose"],"sources":["/Users/jeussantiago/Documents/coding/django/CoinCompanions/backend/frontend/src/components/IndividualGroupScreenComponents/GroupCreditDebt.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Accordion, ListGroup, Button, Row } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport Message from \"../Message\";\nimport { getGroupCredits, getGroupDebts } from \"../../actions/groupActions\";\nimport SettlePopup from \"./SettlePopup\";\n\nfunction GroupCreditDebt({ groupDetails }) {\n    const dispatch = useDispatch();\n    const [showSettlePopup, setShowSettlePopup] = useState(false);\n    const [selectedUser, setSelectedUser] = useState(null);\n\n    const userLogin = useSelector((state) => state.userLogin);\n    const { userInfo } = userLogin;\n\n    // settle expenses\n    const groupSettleCreate = useSelector((state) => state.groupSettleCreate);\n    const { success: groupSettleCreateSuccess } = groupSettleCreate;\n    // expense update\n    const groupExpenseDetailUpdate = useSelector(\n        (state) => state.groupExpenseDetailUpdate\n    );\n    const { success: groupExpenseDetailUpdateSuccess } =\n        groupExpenseDetailUpdate;\n\n    // expense delete\n    const groupExpenseDelete = useSelector((state) => state.groupExpenseDelete);\n    const { success: groupExpenseDeleteSuccess } = groupExpenseDelete;\n    // group expense created\n    const groupExpenseCreate = useSelector((state) => state.groupExpenseCreate);\n    const { success: groupExpenseCreateSuccess } = groupExpenseCreate;\n\n    // group User Credits (owed money)\n    const groupCredits = useSelector((state) => state.groupCredits);\n    const {\n        error: groupCreditError,\n        loading: groupCreditLoading,\n        groupCredit,\n    } = groupCredits;\n    // group User Debts (owe money)\n    const groupDebts = useSelector((state) => state.groupDebts);\n    const {\n        error: groupDebtError,\n        loading: groupDebtLoading,\n        groupDebt,\n    } = groupDebts;\n\n    const handleCloseSettlePopup = () => {\n        setShowSettlePopup(false);\n        setSelectedUser(null);\n    };\n\n    const handleOpenSettlePopup = (receivingUser) => {\n        setSelectedUser(receivingUser);\n        setShowSettlePopup(true);\n    };\n\n    useEffect(() => {\n        dispatch(getGroupCredits(groupDetails.id));\n        dispatch(getGroupDebts(groupDetails.id));\n    }, [\n        dispatch,\n        groupDetails,\n        groupSettleCreateSuccess,\n        groupExpenseDetailUpdateSuccess,\n        groupExpenseDeleteSuccess,\n        groupExpenseCreateSuccess,\n    ]);\n\n    return (\n        <div>\n            {groupCreditLoading || groupDebtLoading ? (\n                <div>Loading...</div>\n            ) : groupCreditError || groupDebtError ? (\n                <Message variant=\"danger\">\n                    {groupCreditError || groupDebtError}\n                </Message>\n            ) : (\n                <div>\n                    <h4>Members</h4>\n\n                    <Accordion defaultActiveKey={null}>\n                        {groupDetails.members.map((member) => (\n                            <Accordion.Item\n                                eventKey={member.id}\n                                key={member.id}\n                            >\n                                <Accordion.Header>\n                                    {member.name}\n                                </Accordion.Header>\n                                <Accordion.Body>\n                                    {groupCredit?.credits_per_user?.[\n                                        member.id\n                                    ] && (\n                                        <div>\n                                            <ListGroup>\n                                                {groupCredit.credits_per_user[\n                                                    member.id\n                                                ].map((user, index) => (\n                                                    <ListGroup.Item key={index}>\n                                                        <span className=\"text-primary\">\n                                                            ${user.amount}{\" \"}\n                                                        </span>\n                                                        from {user.debtor.name}\n                                                    </ListGroup.Item>\n                                                ))}\n                                            </ListGroup>\n                                        </div>\n                                    )}\n                                    {groupDebt?.debts_per_user?.[member.id] && (\n                                        <div>\n                                            <ListGroup>\n                                                {groupDebt.debts_per_user[\n                                                    member.id\n                                                ].map((user, index) => (\n                                                    <ListGroup.Item key={index}>\n                                                        <span className=\"text-secondary\">\n                                                            ${user.amount}{\" \"}\n                                                        </span>\n                                                        to {user.creditor.name}\n                                                        {userInfo &&\n                                                            member.id ===\n                                                                userInfo.id && (\n                                                                <Row className=\"mt-3\">\n                                                                    <Button\n                                                                        variant=\"primary\"\n                                                                        onClick={() =>\n                                                                            handleOpenSettlePopup(\n                                                                                user.creditor\n                                                                            )\n                                                                        }\n                                                                    >\n                                                                        Settle\n                                                                    </Button>\n                                                                </Row>\n                                                            )}\n                                                    </ListGroup.Item>\n                                                ))}\n                                            </ListGroup>\n                                        </div>\n                                    )}\n                                </Accordion.Body>\n                            </Accordion.Item>\n                        ))}\n                    </Accordion>\n                </div>\n            )}\n            {selectedUser && (\n                <SettlePopup\n                    groupId={groupDetails.id}\n                    receivingUser={selectedUser}\n                    show={showSettlePopup}\n                    handleClose={handleCloseSettlePopup}\n                />\n            )}\n        </div>\n    );\n}\n\nexport default GroupCreditDebt;\n"],"mappings":"iKAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,SAAS,CAAEC,MAAM,CAAEC,GAAG,KAAQ,iBAAiB,CACnE,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD,MAAO,CAAAC,OAAO,KAAM,YAAY,CAChC,OAASC,eAAe,CAAEC,aAAa,KAAQ,4BAA4B,CAC3E,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAmB,IAAhB,CAAAC,YAAY,CAAAD,IAAA,CAAZC,YAAY,CACnC,GAAM,CAAAC,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,IAAAc,SAAA,CAA8CpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAtDG,eAAe,CAAAF,UAAA,IAAEG,kBAAkB,CAAAH,UAAA,IAC1C,IAAAI,UAAA,CAAwCzB,QAAQ,CAAC,IAAI,CAAC,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC,GAAM,CAAAG,SAAS,CAAGtB,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACD,SAAS,GAAC,CACzD,GAAQ,CAAAE,QAAQ,CAAKF,SAAS,CAAtBE,QAAQ,CAEhB;AACA,GAAM,CAAAC,iBAAiB,CAAGzB,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACE,iBAAiB,GAAC,CACzE,GAAiB,CAAAC,wBAAwB,CAAKD,iBAAiB,CAAvDE,OAAO,CACf;AACA,GAAM,CAAAC,wBAAwB,CAAG5B,WAAW,CACxC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACK,wBAAwB,EAC7C,CAAC,CACD,GAAiB,CAAAC,+BAA+B,CAC5CD,wBAAwB,CADpBD,OAAO,CAGf;AACA,GAAM,CAAAG,kBAAkB,CAAG9B,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACO,kBAAkB,GAAC,CAC3E,GAAiB,CAAAC,yBAAyB,CAAKD,kBAAkB,CAAzDH,OAAO,CACf;AACA,GAAM,CAAAK,kBAAkB,CAAGhC,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACS,kBAAkB,GAAC,CAC3E,GAAiB,CAAAC,yBAAyB,CAAKD,kBAAkB,CAAzDL,OAAO,CAEf;AACA,GAAM,CAAAO,YAAY,CAAGlC,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACW,YAAY,GAAC,CAC/D,GACW,CAAAC,gBAAgB,CAGvBD,YAAY,CAHZE,KAAK,CACIC,kBAAkB,CAE3BH,YAAY,CAFZI,OAAO,CACPC,WAAW,CACXL,YAAY,CADZK,WAAW,CAEf;AACA,GAAM,CAAAC,UAAU,CAAGxC,WAAW,CAAC,SAACuB,KAAK,QAAK,CAAAA,KAAK,CAACiB,UAAU,GAAC,CAC3D,GACW,CAAAC,cAAc,CAGrBD,UAAU,CAHVJ,KAAK,CACIM,gBAAgB,CAEzBF,UAAU,CAFVF,OAAO,CACPK,SAAS,CACTH,UAAU,CADVG,SAAS,CAGb,GAAM,CAAAC,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAA,CAAS,CACjC3B,kBAAkB,CAAC,KAAK,CAAC,CACzBI,eAAe,CAAC,IAAI,CAAC,CACzB,CAAC,CAED,GAAM,CAAAwB,qBAAqB,CAAG,QAAxB,CAAAA,qBAAqBA,CAAIC,aAAa,CAAK,CAC7CzB,eAAe,CAACyB,aAAa,CAAC,CAC9B7B,kBAAkB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAEDvB,SAAS,CAAC,UAAM,CACZkB,QAAQ,CAACV,eAAe,CAACS,YAAY,CAACoC,EAAE,CAAC,CAAC,CAC1CnC,QAAQ,CAACT,aAAa,CAACQ,YAAY,CAACoC,EAAE,CAAC,CAAC,CAC5C,CAAC,CAAE,CACCnC,QAAQ,CACRD,YAAY,CACZe,wBAAwB,CACxBG,+BAA+B,CAC/BE,yBAAyB,CACzBE,yBAAyB,CAC5B,CAAC,CAEF,mBACIzB,KAAA,QAAAwC,QAAA,EACKX,kBAAkB,EAAIK,gBAAgB,cACnCpC,IAAA,QAAA0C,QAAA,CAAK,YAAU,CAAK,CAAC,CACrBb,gBAAgB,EAAIM,cAAc,cAClCnC,IAAA,CAACL,OAAO,EAACgD,OAAO,CAAC,QAAQ,CAAAD,QAAA,CACpBb,gBAAgB,EAAIM,cAAc,CAC9B,CAAC,cAEVjC,KAAA,QAAAwC,QAAA,eACI1C,IAAA,OAAA0C,QAAA,CAAI,SAAO,CAAI,CAAC,cAEhB1C,IAAA,CAACX,SAAS,EAACuD,gBAAgB,CAAE,IAAK,CAAAF,QAAA,CAC7BrC,YAAY,CAACwC,OAAO,CAACC,GAAG,CAAC,SAACC,MAAM,MAAAC,qBAAA,CAAAC,qBAAA,oBAC7B/C,KAAA,CAACb,SAAS,CAAC6D,IAAI,EACXC,QAAQ,CAAEJ,MAAM,CAACN,EAAG,CAAAC,QAAA,eAGpB1C,IAAA,CAACX,SAAS,CAAC+D,MAAM,EAAAV,QAAA,CACZK,MAAM,CAACM,IAAI,CACE,CAAC,cACnBnD,KAAA,CAACb,SAAS,CAACiE,IAAI,EAAAZ,QAAA,EACV,CAAAT,WAAW,SAAXA,WAAW,kBAAAe,qBAAA,CAAXf,WAAW,CAAEsB,gBAAgB,UAAAP,qBAAA,iBAA7BA,qBAAA,CACGD,MAAM,CAACN,EAAE,CACZ,gBACGzC,IAAA,QAAA0C,QAAA,cACI1C,IAAA,CAACV,SAAS,EAAAoD,QAAA,CACLT,WAAW,CAACsB,gBAAgB,CACzBR,MAAM,CAACN,EAAE,CACZ,CAACK,GAAG,CAAC,SAACU,IAAI,CAAEC,KAAK,qBACdvD,KAAA,CAACZ,SAAS,CAAC4D,IAAI,EAAAR,QAAA,eACXxC,KAAA,SAAMwD,SAAS,CAAC,cAAc,CAAAhB,QAAA,EAAC,GAC1B,CAACc,IAAI,CAACG,MAAM,CAAE,GAAG,EAChB,CAAC,QACF,CAACH,IAAI,CAACI,MAAM,CAACP,IAAI,GAJLI,KAKL,CAAC,EACpB,CAAC,CACK,CAAC,CACX,CACR,CACA,CAAApB,SAAS,SAATA,SAAS,kBAAAY,qBAAA,CAATZ,SAAS,CAAEwB,cAAc,UAAAZ,qBAAA,iBAAzBA,qBAAA,CAA4BF,MAAM,CAACN,EAAE,CAAC,gBACnCzC,IAAA,QAAA0C,QAAA,cACI1C,IAAA,CAACV,SAAS,EAAAoD,QAAA,CACLL,SAAS,CAACwB,cAAc,CACrBd,MAAM,CAACN,EAAE,CACZ,CAACK,GAAG,CAAC,SAACU,IAAI,CAAEC,KAAK,qBACdvD,KAAA,CAACZ,SAAS,CAAC4D,IAAI,EAAAR,QAAA,eACXxC,KAAA,SAAMwD,SAAS,CAAC,gBAAgB,CAAAhB,QAAA,EAAC,GAC5B,CAACc,IAAI,CAACG,MAAM,CAAE,GAAG,EAChB,CAAC,MACJ,CAACH,IAAI,CAACM,QAAQ,CAACT,IAAI,CACrBnC,QAAQ,EACL6B,MAAM,CAACN,EAAE,GACLvB,QAAQ,CAACuB,EAAE,eACXzC,IAAA,CAACR,GAAG,EAACkE,SAAS,CAAC,MAAM,CAAAhB,QAAA,cACjB1C,IAAA,CAACT,MAAM,EACHoD,OAAO,CAAC,SAAS,CACjBoB,OAAO,CAAE,SAAAA,QAAA,QACL,CAAAxB,qBAAqB,CACjBiB,IAAI,CAACM,QACT,CAAC,EACJ,CAAApB,QAAA,CACJ,QAED,CAAQ,CAAC,CACR,CACR,GApBYe,KAqBL,CAAC,EACpB,CAAC,CACK,CAAC,CACX,CACR,EACW,CAAC,GAxDZV,MAAM,CAACN,EAyDA,CAAC,EACpB,CAAC,CACK,CAAC,EACX,CACR,CACA3B,YAAY,eACTd,IAAA,CAACF,WAAW,EACRkE,OAAO,CAAE3D,YAAY,CAACoC,EAAG,CACzBD,aAAa,CAAE1B,YAAa,CAC5BmD,IAAI,CAAEvD,eAAgB,CACtBwD,WAAW,CAAE5B,sBAAuB,CACvC,CACJ,EACA,CAAC,CAEd,CAEA,cAAe,CAAAnC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}